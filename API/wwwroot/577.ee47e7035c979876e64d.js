"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[577],{1577:(eS,b2,i)=>{i.r(b2),i.d(b2,{ShopModule:()=>cS});var o=i(8583),l7=i(4466),n=i(15);class y{constructor(){this.brandId=0,this.typeId=0,this.sort="name",this.pageNumber=1,this.pageSize=6}}var c=i(3018),w2=i(1841);class o7{constructor(){this.data=[]}}var B=i(8002),v=i(5917),n7=i(2340);let k2=(()=>{class s{constructor(a){this.http=a,this.baseUrl=n7.N.apiUrl,this.products=[],this.brands=[],this.types=[],this.pagination=new o7,this.shopParams=new y,this.productCache=new Map}getProducts(a){if(a||(this.productCache=new Map),this.productCache.size>0&&a&&this.productCache.has(Object.values(this.shopParams).join("-")))return this.pagination.data=this.productCache.get(Object.values(this.shopParams).join("-")),(0,v.of)(this.pagination);let e=new w2.LE;return 0!==this.shopParams.brandId&&(e=e.append("brandId",this.shopParams.brandId.toString())),0!==this.shopParams.typeId&&(e=e.append("typeId",this.shopParams.typeId.toString())),this.shopParams.search&&(e=e.append("search",this.shopParams.search)),e=e.append("sort",this.shopParams.sort),e=e.append("pageIndex",this.shopParams.pageNumber.toString()),e=e.append("pageSize",this.shopParams.pageSize.toString()),this.http.get(`${this.baseUrl}/products`,{observe:"response",params:e}).pipe((0,B.U)(f=>(this.productCache.set(Object.values(this.shopParams).join("-"),f.body.data),this.pagination=f.body,this.pagination)))}setShopParams(a){this.shopParams=a}getShopParams(){return this.shopParams}getProduct(a){let e;return this.productCache.forEach(f=>{e=f.find(l=>l.id==a)}),e?(0,v.of)(e):this.http.get(`${this.baseUrl}/products/${a}`)}getBrands(){return this.brands.length>0?(0,v.of)(this.brands):this.http.get(`${this.baseUrl}/products/brands`).pipe((0,B.U)(a=>(this.brands=a,a)))}getTypes(){return this.types.length>0?(0,v.of)(this.types):this.http.get(`${this.baseUrl}/products/types`).pipe((0,B.U)(a=>(this.types=a,a)))}}return s.\u0275fac=function(a){return new(a||s)(c.LFG(w2.eN))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function H7(s,r){if(1&s&&(c.TgZ(0,"span"),c._uU(1,"Showing "),c.TgZ(2,"strong"),c._uU(3),c.qZA(),c._uU(4," of "),c.TgZ(5,"strong"),c._uU(6),c.qZA(),c._uU(7," Results"),c.qZA()),2&s){const a=c.oxw();c.xp6(3),c.AsE("",(a.pageNumber-1)*a.pageSize+1," - ",a.pageSize*a.pageNumber>a.totalCount?a.totalCount:a.pageSize*a.pageNumber,""),c.xp6(3),c.hij(" ",a.totalCount," ")}}function z7(s,r){1&s&&(c.TgZ(0,"span"),c._uU(1," No results. "),c.qZA())}let t7=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",pageSize:"pageSize",totalCount:"totalCount"},decls:3,vars:2,consts:[[4,"ngIf"]],template:function(a,e){1&a&&(c.TgZ(0,"header"),c.YNc(1,H7,8,3,"span",0),c.YNc(2,z7,2,0,"span",0),c.qZA()),2&a&&(c.xp6(1),c.Q6J("ngIf",e.totalCount&&e.totalCount>0),c.xp6(1),c.Q6J("ngIf",0===e.totalCount))},directives:[o.O5],styles:[""]}),s})();var M=i(665),q2={prefix:"fas",iconName:"circle-minus",icon:[512,512,["minus-circle"],"f056","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232H328c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},u0={prefix:"fas",iconName:"cart-shopping",icon:[576,512,[128722,"shopping-cart"],"f07a","M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},M5={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},f7=i(9508),i7=i(9577);let UN=(()=>{class s{constructor(a){this.basketService=a,this.faShoppingCart=u0}ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}}return s.\u0275fac=function(a){return new(a||s)(c.Y36(f7.v))},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-product-item"]],inputs:{product:"product"},decls:15,vars:9,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"card-img-top","img-fluid","bg-info",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],[3,"icon"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(a,e){1&a&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"div",3),c.TgZ(4,"button",4),c.NdJ("click",function(){return e.addItemToBasket()}),c._UZ(5,"fa-icon",5),c.qZA(),c.TgZ(6,"button",6),c._uU(7," View "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",7),c.TgZ(9,"a",8),c.TgZ(10,"h6",9),c._uU(11),c.qZA(),c.qZA(),c.TgZ(12,"span",10),c._uU(13),c.ALo(14,"currency"),c.qZA(),c.qZA(),c.qZA()),2&a&&(c.xp6(2),c.s9C("alt",e.product.name),c.Q6J("src",e.product.pictureUrl,c.LSH),c.xp6(3),c.Q6J("icon",e.faShoppingCart),c.xp6(1),c.MGl("routerLink","/shop/",e.product.id,""),c.xp6(3),c.MGl("routerLink","/shop/",e.product.id,""),c.xp6(2),c.hij(" ",e.product.name," "),c.xp6(2),c.hij(" ",c.lcZ(14,7,e.product.price)," "))},directives:[i7.BN,n.rH,n.yS],pipes:[o.H9],styles:[".btn[_ngcontent-%COMP%]{width:30%;height:40px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(255,255,255,.5);opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translate(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translate(20px)}"]}),s})();var qN=i(2214);let GN=(()=>{class s{constructor(){this.pageChanged=new c.vpe}ngOnInit(){}onPagerChange(a){this.pageChanged.emit(a.page)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize",pageNumber:"pageNumber"},outputs:{pageChanged:"pageChanged"},decls:1,vars:4,consts:[["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","ngModel","itemsPerPage","pageChanged"]],template:function(a,e){1&a&&(c.TgZ(0,"pagination",0),c.NdJ("pageChanged",function(l){return e.onPagerChange(l)}),c.qZA()),2&a&&c.Q6J("boundaryLinks",!0)("totalItems",e.totalCount)("ngModel",e.pageNumber)("itemsPerPage",e.pageSize)},directives:[qN.Qt,M.JJ,M.On],styles:[""]}),s})();const WN=["search"];function EN(s,r){if(1&s&&(c.TgZ(0,"option",16),c._uU(1),c.qZA()),2&s){const a=r.$implicit,e=c.oxw(2);c.Q6J("selected",e.shopParams.sort===a.value)("value",a.value),c.xp6(1),c.hij(" ",a.name," ")}}function _N(s,r){if(1&s){const a=c.EpF();c.TgZ(0,"li",17),c.NdJ("click",function(){const l=c.CHM(a).$implicit;return c.oxw(2).onBrandSelected(l.id)}),c._uU(1),c.qZA()}if(2&s){const a=r.$implicit,e=c.oxw(2);c.ekj("active",a.id===e.shopParams.brandId),c.Q6J("value",a.id),c.xp6(1),c.hij(" ",a.name," ")}}function ZN(s,r){if(1&s){const a=c.EpF();c.TgZ(0,"li",17),c.NdJ("click",function(){const l=c.CHM(a).$implicit;return c.oxw(2).onTypeSelected(l.id)}),c._uU(1),c.qZA()}if(2&s){const a=r.$implicit,e=c.oxw(2);c.ekj("active",a.id===e.shopParams.typeId),c.Q6J("value",a.id),c.xp6(1),c.hij(" ",a.name," ")}}function IN(s,r){if(1&s){const a=c.EpF();c.ynx(0),c.TgZ(1,"h5",10),c._uU(2,"Sort"),c.qZA(),c.TgZ(3,"select",11),c.NdJ("change",function(f){return c.CHM(a),c.oxw().onSortSelected(f.target.value)}),c.YNc(4,EN,2,3,"option",12),c.qZA(),c.TgZ(5,"h5",13),c._uU(6,"Brands"),c.qZA(),c.TgZ(7,"ul",14),c.YNc(8,_N,2,4,"li",15),c.qZA(),c.TgZ(9,"h5",10),c._uU(10,"Types"),c.qZA(),c.TgZ(11,"ul",14),c.YNc(12,ZN,2,4,"li",15),c.qZA(),c.BQk()}if(2&s){const a=c.oxw();c.xp6(4),c.Q6J("ngForOf",a.sortOptions),c.xp6(4),c.Q6J("ngForOf",a.brands),c.xp6(4),c.Q6J("ngForOf",a.types)}}function ON(s,r){if(1&s){const a=c.EpF();c.TgZ(0,"div",18),c._UZ(1,"input",19,20),c.TgZ(3,"button",21),c.NdJ("click",function(){return c.CHM(a),c.oxw().onSearch()}),c._uU(4," Search "),c.qZA(),c.TgZ(5,"button",22),c.NdJ("click",function(){return c.CHM(a),c.oxw().onReset()}),c._uU(6," Reset "),c.qZA(),c.qZA()}}function QN(s,r){if(1&s&&(c.TgZ(0,"div",23),c._UZ(1,"app-product-item",24),c.qZA()),2&s){const a=r.$implicit;c.xp6(1),c.Q6J("product",a)}}function JN(s,r){if(1&s){const a=c.EpF();c.TgZ(0,"div",25),c.TgZ(1,"app-pager",26),c.NdJ("pageChanged",function(f){return c.CHM(a),c.oxw().onPageChanged(f)}),c.qZA(),c.qZA()}if(2&s){const a=c.oxw();c.xp6(1),c.Q6J("pageSize",a.shopParams.pageSize)("totalCount",a.totalCount)}}let jN=(()=>{class s{constructor(a){this.shopService=a,this.shopParams=new y,this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to High",value:"priceAsc"},{name:"Price: High to Low",value:"priceDesc"}],this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getProducts(!0),this.getBrands(),this.getTypes()}getProducts(a=!1){this.productsSub=this.shopService.getProducts(a).subscribe(e=>{this.products=e.data,this.totalCount=e.count},e=>{console.log(e)})}getBrands(){this.shopService.getBrands().subscribe(a=>{this.brands=[{id:0,name:"All"},...a]},a=>{console.log(a)})}getTypes(){this.shopService.getTypes().subscribe(a=>{this.types=[{id:0,name:"All"},...a]},a=>{console.log(a)})}onBrandSelected(a){const e=this.shopService.getShopParams();e.brandId=a,e.pageNumber=1,this.shopService.setShopParams(e),this.getProducts()}onTypeSelected(a){const e=this.shopService.getShopParams();e.typeId=a,e.pageNumber=1,this.shopService.setShopParams(e),this.getProducts()}onSortSelected(a){const e=this.shopService.getShopParams();e.sort=a,this.shopService.setShopParams(e),this.getProducts()}onPageChanged(a){const e=this.shopService.getShopParams();e.pageNumber!==a&&(e.pageNumber=a,this.shopService.setShopParams(e),this.getProducts(!0))}onSearch(){const a=this.shopService.getShopParams();a.search=this.searchTerm.nativeElement.value,a.pageNumber=1,this.shopService.setShopParams(a),this.getProducts()}onReset(){this.searchTerm.nativeElement.value="";const a=new y;this.shopService.setShopParams(a),this.getProducts()}}return s.\u0275fac=function(a){return new(a||s)(c.Y36(k2))},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-shop"]],viewQuery:function(a,e){if(1&a&&c.Gf(WN,5),2&a){let f;c.iGM(f=c.CRH())&&(e.searchTerm=f.first)}},decls:11,vars:7,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageNumber","pageSize"],["class","form-inline",4,"ngIf"],["class","col-4 mb-4 product-item-container",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ml-3"],["name","","id","",1,"custom-select","mb-3",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"text-warning","mt-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item",3,"value","click"],[1,"form-inline"],["type","text","placeholder","Search",1,"form-control","mr-2",2,"width","300px"],["search",""],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-primary","ml-2","my-2",3,"click"],[1,"col-4","mb-4","product-item-container"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageChanged"]],template:function(a,e){1&a&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"section",2),c.YNc(3,IN,13,3,"ng-container",3),c.qZA(),c.TgZ(4,"section",4),c.TgZ(5,"div",5),c._UZ(6,"app-paging-header",6),c.YNc(7,ON,7,0,"div",7),c.qZA(),c.TgZ(8,"div",1),c.YNc(9,QN,2,1,"div",8),c.qZA(),c.YNc(10,JN,2,2,"div",9),c.qZA(),c.qZA(),c.qZA()),2&a&&(c.xp6(3),c.Q6J("ngIf",e.types&&e.brands),c.xp6(3),c.Q6J("totalCount",e.totalCount)("pageNumber",e.shopParams.pageNumber)("pageSize",e.shopParams.pageSize),c.xp6(1),c.Q6J("ngIf",e.products),c.xp6(2),c.Q6J("ngForOf",e.products),c.xp6(1),c.Q6J("ngIf",e.totalCount>0))},directives:[o.O5,t7,o.sg,M.YN,M.Kr,UN,GN],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#e95620b4;border-radius:10px}"]}),s})();var XN=i(7285);function KN(s,r){if(1&s){const a=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"div",3),c._UZ(2,"img",4),c.qZA(),c.TgZ(3,"div",3),c.TgZ(4,"h3"),c._uU(5),c.qZA(),c.TgZ(6,"p",5),c._uU(7),c.ALo(8,"currency"),c.qZA(),c.TgZ(9,"div",6),c.TgZ(10,"fa-icon",7),c.NdJ("click",function(){return c.CHM(a),c.oxw().decrementQuantity()}),c.qZA(),c.TgZ(11,"span",8),c._uU(12),c.qZA(),c.TgZ(13,"fa-icon",9),c.NdJ("click",function(){return c.CHM(a),c.oxw().incrementQuantity()}),c.qZA(),c.TgZ(14,"button",10),c.NdJ("click",function(){return c.CHM(a),c.oxw().addItemToBasket()}),c._uU(15," Add to Cart "),c.qZA(),c.qZA(),c.TgZ(16,"div",11),c.TgZ(17,"h4"),c._uU(18,"Description"),c.qZA(),c.TgZ(19,"p"),c._uU(20),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&s){const a=c.oxw();c.xp6(2),c.s9C("src",a.product.pictureUrl,c.LSH),c.s9C("alt",a.product.name),c.xp6(3),c.Oqu(a.product.name),c.xp6(2),c.Oqu(c.lcZ(8,8,a.product.price)),c.xp6(3),c.Q6J("icon",a.faMinusCircle),c.xp6(2),c.hij(" ",a.quantity," "),c.xp6(1),c.Q6J("icon",a.faPlusCircle),c.xp6(7),c.Oqu(a.product.description)}}const YN=[{path:"",component:jN},{path:":id",component:(()=>{class s{constructor(a,e,f,l){this.shopService=a,this.activatedRoute=e,this.bcService=f,this.basketService=l,this.quantity=1,this.faMinusCircle=q2,this.faPlusCircle=M5,this.bcService.set("@productDetails"," ")}ngOnInit(){this.loadProduct()}getProduct(){this.shopService.getProduct(+this.activatedRoute.snapshot.paramMap.get("id")).subscribe(a=>{this.product=a,this.bcService.set("@productDetails",a.name)},a=>{console.log(a)})}addItemToBasket(){this.basketService.addItemToBasket(this.product,this.quantity)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}loadProduct(){const a=+this.activatedRoute.snapshot.paramMap.get("id");this.productSub=this.shopService.getProduct(a).subscribe(e=>{this.product=e,this.bcService.set("@productDetails",e.name)},e=>console.log(e))}ngOnDestroy(){this.productSub&&this.productSub.unsubscribe()}}return s.\u0275fac=function(a){return new(a||s)(c.Y36(k2),c.Y36(n.gz),c.Y36(XN.pm),c.Y36(f7.v))},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-product-details"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"text-warning","mr-2",2,"cursor","pointer",3,"icon","click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"text-warning","mx-2",2,"cursor","pointer",3,"icon","click"],["type","button",1,"btn","btn-outline-primary","btn-lg","ml-4",3,"click"],[1,"mt-5"]],template:function(a,e){1&a&&(c.TgZ(0,"div",0),c.YNc(1,KN,21,10,"div",1),c.qZA()),2&a&&(c.xp6(1),c.Q6J("ngIf",e.product))},directives:[o.O5,i7.BN],pipes:[o.H9],styles:[""]}),s})(),data:{breadcrumb:{alias:"productDetails"}}}];let $N=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[n.Bz.forChild(YN)],n.Bz]}),s})(),cS=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[o.ez,l7.m,$N]]}),s})()}}]);